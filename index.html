<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Factor Investing with Machine Learning</title>
  <meta name="description" content="Compare OLS, Random Forest, and Neural Network models using factor signals to predict next-month IC and construct quantile portfolios." />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {font-family: Inter, Arial, sans-serif; margin:0; background:#fff; color:#222; line-height:1.6}
    .container {max-width:900px; margin:0 auto; padding:40px 20px}
    .card {background:#f9f9f9; border:1px solid #e0e0e0; border-radius:12px; padding:24px; margin:20px 0}
    .btn {display:inline-block; padding:10px 18px; background:#1976d2; color:#fff; border-radius:8px; text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <header style="text-align:center; margin-bottom:32px;">
      <h1>Factor Investing with Machine Learning</h1>
      <p class="lead">A brief English summary of this project. The full report (in Mandarin) is available below.</p>
      <a class="btn" href="IC_ML.pdf" download>ðŸ“„ Download Full Report (PDF)</a>
    </header>

    <section class="card">
      <h2>Abstract</h2>
      <p>
        Factor investing has grown with advances in machine learning and the availability of rich market data.
        Human decisions are prone to bias, while algorithmic analysis can uncover relationships that are not easily visible and improve portfolio construction.
        This project applies three machine learning models: OLS, Random Forest, and Neural Networks with varying layers, to predict next-month Information Coefficients (IC), including both Rank IC (RIC) and Normal IC (NIC), using factor signals such as Size, Book-to-Market, and Momentum.
        The predicted ICs are used to form longâ€“short portfolios across multiple quantile partitions.
        Across quantiles, portfolios constructed from Random Forest predicted NIC consistently outperform the market, achieving higher win rates and stronger cumulative returns, especially at finer partitions (450 to 900 buckets).
        Overall, Random Forest with the three factors is the most reliable method for improving portfolio performance and stability among the tested models.
      </p>
    </section>

    <section class="card">
  <h2>Methodology & Workflow</h2>
  <p>
    The workflow of this project follows a structured pipeline that links data extraction, 
    machine learning prediction, and portfolio construction. Monthly TEJ data are first 
    cleaned and transformed to compute the Size, Book-to-Market, and Momentum factors. 
    Using these factor signals, three machine learning modelsâ€”OLS, Random Forests, and 
    Neural Networksâ€”are trained to generate one-month-ahead predictions of Information 
    Coefficients (ICs), including both Rank IC (RIC) and Normal IC (NIC).
  </p>

  <p>
    Based on the predicted IC sign, stocks are sorted by their factor values and allocated 
    into multiple quantile partitions (e.g., 10, 20, 50, 100, 200, 300, 450, and 900 buckets). 
    When the predicted IC is positive, the strategy takes long positions in the highest 
    quantile and short positions in the lowest quantile. When the IC is negative, the 
    longâ€“short positions are reversed. This framework allows us to evaluate how different 
    machine learning models enhance predictive accuracy and improve portfolio performance 
    across increasingly fine quantile structures.
  </p>

  <div style="text-align:center; margin-top:24px;">
    <img src="Architecture.png" alt="Workflow Diagram" style="max-width:100%; border-radius:12px;">
  </div>
</section>

  <!-- New card: Rank IC & Normal IC -->
  <section class="card">
    <h2>Rank IC and Normal IC</h2>
    <p>
      Information Coefficients (ICs) measure how well a factor predicts future returns. 
      In this project, we use two types of ICs: Rank IC (RIC) and Normal IC (NIC).
    </p>

    <h3 style="margin-top:16px;">Rank IC (RIC)</h3>
    <p>
      Rank IC first converts raw factor values into cross-sectional ranks within each month, 
      and then computes the correlation between these ranks and the realized returns in the 
      next month. Let \(X_t = (X_{1t}, \ldots, X_{Nt})\) be the factor values at month \(t\), 
      and \(R_{t+1} = (R_{1,t+1}, \ldots, R_{N,t+1})\) be the one-month-ahead returns. 
      The Rank IC at month \(t\) is
    </p>
    <p style="text-align:center;">
      \[
        \mathrm{RIC}_t = \mathrm{Corr}\big( \operatorname{rank}(X_t),\, R_{t+1} \big).
      \]
    </p>
    <p>
      Because it uses ranks instead of raw values, Rank IC is less sensitive to outliers 
      and monotonic transformations of the factor, making it a robust measure of the 
      cross-sectional ordering power of the factor.
    </p>

    <h3 style="margin-top:16px;">Normal IC (NIC)</h3>
    <p>
      Normal IC directly computes the Pearson correlation between the raw factor values 
      and the next-month returns. Using the same notation, the Normal IC at month \(t\) is
    </p>
    <p style="text-align:center;">
      \[
        \mathrm{NIC}_t = \mathrm{Corr}\big( X_t,\, R_{t+1} \big).
      \]
    </p>
    <p>
      Normal IC is more sensitive to the magnitude of factor values and extreme observations, 
      but it captures linear relationships between the factor and future returns. 
      In this study, both RIC and NIC are predicted by machine learning models and 
      then used to guide longâ€“short portfolio construction.
    </p>
  </section>

  <section class="card">
  <h2>Factor Definitions & Empirical Effects</h2>
  <p>
    This project examines three classic cross-sectional equity factorsâ€”Size, 
    Book-to-Market (B/M), and Momentum (Mom)â€”which are widely used in asset pricing, 
    factor investing, and machine-learningâ€“based return prediction. Below we provide 
    the definitions, mathematical formulations, and key empirical findings supporting 
    each factor.
  </p>

  <!-- Size -->
  <h3 style="margin-top:20px;">1. Size (Market Capitalization)</h3>
  <p>
    Size represents the total market capitalization of a firm and reflects its 
    market position, visibility, and future prospects. Larger firms tend to be more 
    stable, while smaller firms often exhibit higher risk and potentially higher returns.
  </p>

  <p style="text-align:center;">
    \[
      \text{Size}_{t} = \log(\text{MarketCap}_{t})
    \]
  </p>

  <p>
    where MarketCap = price Ã— shares outstanding. The log transformation is used 
    because market value tends to be large and skewed.
  </p>

  <h4>Small-Firm Effect</h4>
  <ul>
    <li>Small-firm effect refers to the tendency for small-cap stocks to earn higher returns than large-cap stocks.</li>
    <li>Banz (1981): documented that return decreases as firm size increases.</li>
    <li>Reinganum (1981): showed that the smallest firms earn returns higher than CAPM predictions, with the effect concentrated in January.</li>
  </ul>

  <!-- Book-to-Market -->
  <h3 style="margin-top:24px;">2. Book-to-Market (B/M)</h3>
  <p>
    The Book-to-Market ratio compares a firmâ€™s accounting value (book equity) with 
    its market value, and is often used to identify undervalued (value) versus 
    highly priced (growth) firms.
  </p>

  <p style="text-align:center;">
    \[
      \text{B/M}_{t} = 
      \frac{\text{Book Equity}_{t}}{\text{MarketCap}_{t}}
    \]
  </p>

  <h4>Value Effect</h4>
  <ul>
    <li>Firms with high B/M (value stocks) tend to earn higher returns than low B/M firms (growth stocks).</li>
    <li>Fama and French (1992): demonstrated that high-B/M portfolios significantly outperform low-B/M portfolios across NYSE, AMEX, and NASDAQ.</li>
    <li>Empirical results show the value premium can reach ~1.5% per month in some periods.</li>
  </ul>

  <!-- Momentum -->
  <h3 style="margin-top:24px;">3. Momentum (Mom)</h3>
  <p>
    Momentum measures the tendency of assets that have performed well (poorly) in 
    the past to continue performing well (poorly) in the near future.
  </p>

  <p style="text-align:center;">
    \[
      \text{Mom}_{t} 
      = 
      \ln\!\left(\frac{S_{t-1}}{S_{t-12}}\right)
    \]
  </p>

  <p>
    where the factor uses the cumulative 12-month return from month \(t-12\) to 
    \(t-1\). Using log return removes scale effects and avoids dependency on the base period.
  </p>

  <h4>Momentum Effect</h4>
  <ul>
    <li>Stocks with strong past performance tend to continue outperforming weaker stocks.</li>
    <li>Jegadeesh & Titman (1993): showed that 6â€“12 month winners outperform losers by around 1% per month.</li>
    <li>Momentum is one of the strongest and most persistent anomalies in financial markets worldwide.</li>
  </ul>

</section>
<section class="card">
  <h2>Results</h2>
  <p>
    We summarize three main findings from the IC-based longâ€“short strategies built on
    Size, B/M, and Mom factors:
  </p>
  <ol>
    <li>
      Across all three models, portfolios constructed using predicted Rank IC (RIC) 
      do not generate strong cumulative performance. Strategies based on Normal IC (NIC) 
      consistently outperform those based on RIC.
    </li>
    <li>
      When using NIC, Random Forest (RF) and Artificial Neural Networks (ANN) clearly
      outperform OLS in both cumulative returns and win rates, highlighting the ability 
      of machine learning models to capture non-linear relationships between factors 
      and future returns.
    </li>
    <li>
      For RF- and ANN-based NIC strategies, we observe a clear pattern: the finer the 
      quantile partition (e.g., from 10 to 900 buckets), the higher the cumulative 
      return of the longâ€“short portfolios.
    </li>
  </ol>
  <p>
    Overall, the RFâ€“NIC strategy is the best-performing approach in our IC-based 
    longâ€“short framework, delivering the highest cumulative returns together with
    a win rate exceeding 60%.
  </p>

  <!-- Cumulative return charts -->
  <div style="margin-top:24px; text-align:center;">
    <h3 style="margin-bottom:16px;">Cumulative Returns of IC-Based Longâ€“Short Portfolios</h3>
    <div style="display:flex; flex-wrap:wrap; gap:16px; justify-content:center;">

      <!-- ANN -->
      <div style="flex:1 1 280px; max-width:520px;">
        <img src="ANN_RIC.jpg" alt="ANN RIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">ANN â€” RIC-based portfolios</p>
      </div>

      <div style="flex:1 1 280px; max-width:520px;">
        <img src="ANN_NIC.jpg" alt="ANN NIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">ANN â€” NIC-based portfolios</p>
      </div>

      <!-- RF -->
      <div style="flex:1 1 280px; max-width:520px;">
        <img src="RF_RIC.jpg" alt="RF RIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">Random Forest â€” RIC-based portfolios</p>
      </div>

      <div style="flex:1 1 280px; max-width:520px;">
        <img src="RF_NIC.jpg" alt="RF NIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">Random Forest â€” NIC-based portfolios</p>
      </div>

      <!-- OLS -->
      <div style="flex:1 1 280px; max-width:520px;">
        <img src="OLS_RIC.jpg" alt="OLS RIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">OLS â€” RIC-based portfolios</p>
      </div>

      <div style="flex:1 1 280px; max-width:520px;">
        <img src="OLS_NIC.jpg" alt="OLS NIC cumulative return" style="width:100%; border-radius:12px;">
        <p style="font-size:0.9rem; margin-top:8px;">OLS â€” NIC-based portfolios</p>
      </div>

    </div>
  </div>

  <!-- Win-rate chart -->
  <div style="margin-top:32px; text-align:center;">
    <h3 style="margin-bottom:16px;">Win Rates Across Quantile Portfolios</h3>
    <img src="win_rate.png" alt="Win rates of IC-based strategies" style="max-width:100%; border-radius:12px;">
    <p style="font-size:0.9rem; margin-top:8px;">
      RFâ€“NIC achieves both the highest cumulative return and a win rate above 60%, 
      confirming it as the most effective model in our IC-based longâ€“short setting.
    </p>
  </div>
</section>

    <footer style="text-align:center; margin-top:40px;">
      <p>Â© 2025 Brian Chen â€¢ <a href="IC_ML.pdf">PDF</a></p>
    </footer>
  </div>
</body>
</html>
